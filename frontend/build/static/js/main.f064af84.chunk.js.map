{"version":3,"sources":["state.ts","fetch.ts","config.ts","components/Verification/index.tsx","components/VoterList/index.tsx","components/ValidateChoice/index.tsx","components/ConfirmChoice/index.tsx","components/VotingSystem/index.tsx","App.tsx","index.tsx"],"names":["initialState","passphrase","activeVoteChoice","voterlist","StateProvider","createContext","state","dispatch","Provider","context","reducer","action","type","payload","defaultState","url","a","config","existingHeaders","headers","fetch","method","json","endpoint","window","location","hostname","Verification","props","useContext","useState","setPassphrase","isValidated","setIsValidated","error","setError","profilePic","setProfilePic","busy","setBusy","body","JSON","stringify","res","status","data","photo","setTimeout","next","message","useEffect","disableNext","enableNext","id","src","TextField","label","value","onChange","e","target","toUpperCase","margin","autoComplete","disabled","variant","Button","onClick","color","VoterList","setVoterlist","handleToggle","val","index","d","map","t","checked","list","parse","then","List","dense","i","ListItem","key","button","ListItemAvatar","Avatar","image","ListItemText","primary","name","ListItemSecondaryAction","Checkbox","edge","randomNumber","ValidateChoice","serverResponse","setServerResponse","sessionID","setSessionID","random","setRandom","Math","floor","console","log","voter","intv","setInterval","clearInterval","Typography","className","size","ConfirmChoice","enableBack","disableBack","VotingSystem","activeStep","setActiveStep","nextDisabled","setNextDisabled","backDisabled","setBackDisabled","steps","handleNext","prevActiveStep","Stepper","Step","StepLabel","step","getContent","length","NotLive","style","position","width","height","top","left","display","justifyContent","alignItems","App","useReducer","stage","setStage","address","setAddress","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f064af84.chunk.js","sourcesContent":["import { createContext } from 'react'\n\ntype Voter = {\n\tname: string\n\timage: number\n\tchecked: boolean\n}\n\ntype Context = {\n\tpassphrase: string\n\tvoterlist: Voter[]\n\tactiveVoteChoice: number\n}\n\nconst initialState = {\n\tpassphrase: '',\n\tactiveVoteChoice: -1,\n\tvoterlist: []\n}\n\ntype Dispatch = {\n\ttype: string\n\tpayload: any\n}\n\nfunction reducerFunc(state: Context, action: Dispatch) {\n\tconst { type, payload } = action\n\tswitch(type) {\n\t\tcase 'UPDATE_PASSPHRASE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpassphrase: payload\n\t\t\t}\n\t\tcase 'SET_CURRENT_VOTER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveVoteChoice: payload\n\t\t\t}\n\t\tcase 'RESET':\n\t\t\treturn initialState\n\t\tcase 'UPDATE_VOTER_LIST':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tvoterlist: payload\n\t\t\t}\n\t}\n\n\treturn state\n}\n\nconst StateProvider = createContext<{ state: Context, dispatch(obj: Dispatch): void }>({\n\tstate: initialState,\n\tdispatch: () => 0\n})\n\nexport const Provider = StateProvider.Provider\nexport const context = StateProvider\nexport const reducer = reducerFunc\nexport const defaultState = initialState","export default async function(url: string, config: any = {}) {\n\n\tconst existingHeaders = config.headers ? config.headers : {}\n\n\treturn (await fetch(url, {\n\t\tmethod: 'POST',\n\t\t...config,\n\t\theaders: {\n\t\t\t...existingHeaders,\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t})).json()\n}","export const endpoint = window.location.hostname === 'codefundo2019.tk' ? 'https://codefundo2019.tk' : 'http://localhost:3001'\n","import React, { useState, useContext, useEffect } from 'react'\nimport { TextField, Button } from '@material-ui/core'\nimport './styles.scss'\nimport { context } from '../../state'\nimport fetch from '../../fetch'\nimport { endpoint } from '../../config'\n\ntype Props = {\n\tnext(): void\n\tdisableNext(): void\n\tenableNext(): void\n}\n\nconst Verification: React.FC<Props> = props => {\n\n\tconst { dispatch } = useContext(context)\n\n\tconst [passphrase, setPassphrase] = useState<string>('')\n\tconst [isValidated, setIsValidated] = useState<boolean>(false)\n\tconst [error, setError] = useState<string>('')\n\tconst [profilePic, setProfilePic] = useState<string>('/images/dummy.jpg')\n\n\tconst [busy, setBusy] = useState<boolean>(false)\n\n\tuseEffect(() => {\n\t\tprops.disableNext()\n\t\treturn () => props.enableNext()\n\t}, [])\n\n\tasync function validatePassphrase() {\n\t\tsetError('')\n\t\tsetBusy(true)\n\n\t\tconst res = await fetch(`${endpoint}/passphrase`, {\n\t\t\tbody: JSON.stringify({\n\t\t\t\tpassphrase\n\t\t\t})\n\t\t})\n\n\t\tsetBusy(false)\n\n\t\tconst { status, data } = res\n\n\t\tif(res.status === 'ok') {\n\t\t\tsetIsValidated(true)\n\t\t\tsetProfilePic(data.photo)\n\t\t\tdispatch({ type: 'UPDATE_PASSPHRASE', payload: passphrase })\n\t\t\tsetTimeout(props.next, 1000)\n\n\t\t} else if(res.status === 'error') {\n\t\t\tsetError(res.message)\t\n\t\t}\n\t}\n\n\treturn <div id=\"verification\">\n\t\t<div id=\"user-image\">\n\t\t\t<img src={profilePic} />\n\t\t</div>\n\n\t\t{error && <div id=\"error\">{error}</div>}\n\n\t\t<div id=\"passphrase\">\n\t\t\t<TextField\n\t\t\t\tid=\"passphrase-field\"\n\t\t\t\tlabel=\"Passphrase\"\n\t\t\t\tvalue={passphrase}\n\t\t\t\tonChange={e => setPassphrase(e.target.value.toUpperCase())}\n\t\t\t\tmargin=\"normal\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tdisabled={isValidated || busy}\n\t\t\t\tvariant=\"filled\"\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tid=\"validate-button\"\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tonClick={validatePassphrase}\n\t\t\t\tdisabled={isValidated || busy}\n\t\t\t\tcolor=\"primary\">\n\t\t\t\t{ busy ? 'Please wait...' : 'Verify'}\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n}\n\nexport default Verification","import React, { useState, useContext, useEffect } from 'react'\nimport { List, ListItem, ListItemAvatar, Avatar, ListItemText, ListItemSecondaryAction, Checkbox } from '@material-ui/core'\nimport './styles.scss'\nimport { context } from '../../state'\nimport { endpoint } from '../../config';\n\ntype Props = {\n\tdisableNext(): void\n\tenableNext(): void\n}\n\nconst VoterList: React.FC<Props> = props => {\n\n\tconst { state, dispatch } = useContext(context)\n\tconst [voterlist, setVoterlist] = useState(state.voterlist)\n\n\tuseEffect(() => {\n\t\tif(state.activeVoteChoice !== -1) {\n\t\t\tconst list = JSON.parse(JSON.stringify(voterlist))\n\t\t\tlist[state.activeVoteChoice].checked = true\n\t\t\tsetVoterlist(list)\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tsetVoterlist(state.voterlist)\n\t}, [state.voterlist])\n\n\tuseEffect(() => {\n\t\tfetch(`${endpoint}/voter-list`).then(res => res.json()).then(res => {\n\t\t\tdispatch({ type: 'UPDATE_VOTER_LIST', payload: res.list })\n\t\t})\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif(state.activeVoteChoice === -1) {\n\t\t\tprops.disableNext()\n\t\t} else {\n\t\t\tprops.enableNext()\n\t\t}\n\t}, [state.activeVoteChoice])\n\n\tfunction handleToggle(val: boolean, index: number) {\n\t\tconst d = voterlist.map(t => ({ ...t, checked: false }))\n\t\td[index].checked = val\n\t\tsetVoterlist(d)\n\n\t\tdispatch({ type: 'SET_CURRENT_VOTER', payload: val ? index : -1 })\n\t}\n\n\treturn (\n\t\t<List dense id=\"voter-list\">\n\t\t\t{voterlist.map((value, i) => {\n\t\t\t\treturn (\n\t\t\t\t<ListItem key={i} button onClick={e => handleToggle(!value.checked, i)}>\n\t\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tsrc={`/images/candidates/c${value.image}.jpg`}\n\t\t\t\t\t/>\n\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t<ListItemText primary={value.name} />\n\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\tonChange={e => handleToggle(e.target.checked, i)}\n\t\t\t\t\t\tchecked={value.checked}\n\t\t\t\t\t/>\n\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t</ListItem>\n\t\t\t\t)\n\t\t\t})}\n    </List>\n\t)\n}\n\nexport default VoterList","import React, { useEffect, useState, useContext } from 'react'\nimport QRCode from 'qrcode.react'\nimport { Typography } from '@material-ui/core'\nimport './styles.scss'\nimport fetch from '../../fetch'\nimport { endpoint } from '../../config';\nimport { context } from '../../state';\n\nconst maximum = 999999999999999\nconst minimum = 100000000000000\nlet randomNumber: number = 0\n\ntype Props = {\n\tdisableNext(): void\n\tenableNext(): void\n}\n\nconst ValidateChoice: React.FC<Props> = props => {\n\n\tconst [serverResponse, setServerResponse] = useState<boolean>(false)\n\tconst [sessionID, setSessionID] = useState<number>(-1)\n\tconst [random, setRandom] = useState<number>(-1)\n\n\tconst { state } = useContext(context)\n\n\tuseEffect(() => {\n\t\trandomNumber = Math.floor(Math.random() * (maximum - minimum + 1)) + minimum\n\t\tprops.disableNext()\n\n\t\tconsole.log(state)\n\n\t\tfetch(`${endpoint}/submit-vote`, {\n\t\t\tbody: JSON.stringify({\n\t\t\t\trandom: randomNumber,\n\t\t\t\tpassphrase: state.passphrase,\n\t\t\t\tvoter: state.voterlist[state.activeVoteChoice].name\n\t\t\t})\n\t\t}).then(res => {\n\t\t\tsetSessionID(res.data.sessionID)\n\t\t\tsetRandom(res.data.random)\n\t\t})\n\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif(serverResponse) {\n\t\t\tprops.enableNext()\n\t\t}\n\t}, [serverResponse])\n\n\tuseEffect(() => {\n\t\tconst intv = setInterval(async () => {\n\t\t\t\n\t\t\tconst res = await fetch(`${endpoint}/query-vote`, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\trandom,\n\t\t\t\t\tsessionID\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tif(res.status === 'done') {\n\t\t\t\tsetServerResponse(true)\n\t\t\t}\n\t\t}, 3000)\n\n\t\treturn () => clearInterval(intv)\n\t}, [random, sessionID])\n\n\tif(randomNumber <= 0) return <div>Loading...</div>\n\n\treturn (\n\t\t<div id=\"validate\">\n\t\t\t<Typography variant=\"h4\">{ serverResponse ? 'Confirmed. Your vote has been recorded. Please click on Finish below' : 'Please confirm your vote by scanning the QR code below:' }</Typography>\n\n\t\t\t<div id=\"qr-code\" className={serverResponse ? 'done' : ''}>\n\t\t\t\t{ sessionID && random ? <QRCode\n\t\t\t\t\tsize={450}\n\t\t\t\t\tvalue={JSON.stringify({\n\t\t\t\t\t\trandom,\n\t\t\t\t\t\tsessionID\n\t\t\t\t\t})}\n\t\t\t\t/> : <p>Loading...</p> }\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default ValidateChoice","import React, { useContext, useEffect } from 'react'\nimport { context } from '../../state'\nimport { Typography } from '@material-ui/core';\nimport './styles.scss'\n\ntype Props = {\n\tenableBack(): void\n\tdisableBack(): void\n}\n\nconst ConfirmChoice: React.FC<Props> = props => {\n\n\tconst { state } = useContext(context)\n\tconst voter = state.voterlist[state.activeVoteChoice]\n\n\tuseEffect(() => {\n\t\tprops.enableBack()\n\t\treturn () => props.disableBack()\n\t}, [])\n\n\treturn <div id=\"confirm\">\n\t\t<img src={`/images/candidates/c${voter.image}.jpg`} id=\"voter-final\" />\n\t\t<Typography variant=\"h4\">Are you sure you want to vote <br /><b>{voter.name}</b>?</Typography>\n\t</div>\n}\n\nexport default ConfirmChoice","import React, { useState, useContext } from 'react'\nimport { Stepper, Step, StepLabel, Button } from '@material-ui/core'\nimport Verification from '../Verification'\nimport VoterList from '../VoterList'\nimport ValidateChoice from '../ValidateChoice'\nimport ConfirmChoice from '../ConfirmChoice'\nimport './styles.scss'\nimport { context } from '../../state';\n\nfunction getSteps() {\n  return [\n\t  'Person Verification', \n\t  'Voter List', \n\t  'Confirm Choice',\n\t  'Validate Choice'\n\t]\n}\n\nexport default function VotingSystem() {\n\n\tconst { dispatch } = useContext(context)\n\n\tconst [activeStep, setActiveStep] = useState<number>(0)\n\tconst [nextDisabled, setNextDisabled] = useState<boolean>(false)\n\tconst [backDisabled, setBackDisabled] = useState<boolean>(true)\n\n\tconst steps = getSteps()\n\n\n\tfunction handleNext() {\n\n\t\tif(activeStep === 3) {\n\t\t\t// done\n\t\t\tsetActiveStep(0)\n\t\t\tdispatch({ type: 'RESET', payload: null })\n\t\t} else {\n\t\t\tsetActiveStep(prevActiveStep => prevActiveStep + 1)\n\t\t}\n\n\t}\n\n\tfunction handleBack() {\n\t\tsetActiveStep(prevActiveStep => prevActiveStep - 1)\n\t}\n\n\tfunction disableNext() {\n\t\tsetNextDisabled(true)\n\t}\n\n\tfunction enableNext() {\n\t\tsetNextDisabled(false)\n\t}\n\n\tfunction disableBack() {\n\t\tsetBackDisabled(true)\n\t}\n\n\tfunction enableBack() {\n\t\tsetBackDisabled(false)\n\t}\n\n\n\tfunction getContent(step: number) {\n\t\tswitch(step) {\n\t\t\tcase 0:\n\t\t\t\treturn <Verification \n\t\t\t\t\tnext={handleNext}\n\t\t\t\t\tdisableNext={disableNext}\n\t\t\t\t\tenableNext={enableNext}\n\t\t\t\t/>\n\t\t\tcase 1:\n\t\t\t\treturn <VoterList \n\t\t\t\t\tdisableNext={disableNext}\n\t\t\t\t\tenableNext={enableNext}\n\t\t\t\t/>\n\t\t\tcase 2:\n\t\t\t\treturn <ConfirmChoice\n\t\t\t\t\t\tenableBack={enableBack}\n\t\t\t\t\t\tdisableBack={disableBack}\n\t\t\t\t\t/>\n\t\t\tcase 3:\n\t\t\t\treturn <ValidateChoice \n\t\t\t\t\t\tenableNext={enableNext}\n\t\t\t\t\t\tdisableNext={disableNext}\n\t\t\t\t\t/>\n\t\t}\n\t}\n\n\treturn (\n\t\t<div id=\"interface\">\n\t\t\t\n\t\t\t<Stepper activeStep={activeStep}>\n\t\t\t{steps.map(label => {\n\t\t\t\treturn (\n\t\t\t\t<Step key={label}>\n\t\t\t\t\t<StepLabel>{label}</StepLabel>\n\t\t\t\t</Step>\n\t\t\t\t)\n\t\t\t})}\n\t\t\t</Stepper>\n\n\t\t\t<div id=\"content\">\n\t\t\t{ getContent(activeStep) }\n\t\t\t\t<div id=\"navigation\">\n\t\t\t\t\t\n\t\t\t\t\t{ backDisabled || <Button\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tdisabled={backDisabled}\n\t\t\t\t\t\tonClick={handleBack}>\n\t\t\t\t\t\tBack\n\t\t\t\t\t</Button>}\n\n\t\t\t\t\t{ nextDisabled || <Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tdisabled={nextDisabled}\n\t\t\t\t\tonClick={handleNext}>\n\t\t\t\t\t\t{activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n\t\t\t\t\t</Button>}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t)\n}","import React, { useReducer, useEffect, useState } from 'react'\nimport VotingSystem from './components/VotingSystem'\nimport { Provider, defaultState, reducer } from './state'\nimport { endpoint } from './config'\nimport './App.css'\n\nfunction NotLive() {\n\treturn <div id=\"not-live\" style={{position: 'absolute', width: '100vw', height: '100vh', top: 0, left: 0, display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n\t\t<h1>Voting not live yet</h1>\n\t</div>\n}\n\nconst App: React.FC = () => {\n\n\tconst [state, dispatch] = useReducer(reducer, defaultState)\n\tconst [stage, setStage] = useState<string>()\n\tconst [address, setAddress] = useState<string>()\n\t\n\tuseEffect(() => {\n\t\tfetch(`${endpoint}/get-stage`).then(res => res.json()).then(res => {\n\t\t\tsetStage(res.stage)\n\t\t})\n\n\t\tfetch(`${endpoint}/contract-address`).then(res => res.json()).then(res => {\n\t\t\tsetAddress(res.address)\n\t\t})\n\t}, [])\n\n\treturn (\n\t\t<Provider value={{ state, dispatch }}>\n\t\t\t{ stage === 'VOTING' ? <VotingSystem /> : !stage ? '...Loading' : <NotLive /> }\n\n\t\t\t{address && <p id=\"contract-address\">Contract address: {address}</p>}\n\t\t</Provider>\n\t)\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './globals.scss'\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}